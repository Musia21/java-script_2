const API_URL="/goods.json",vue=new Vue({el:"#app",data:{goods:[],filtredGoods:[],search:""},methods:{searchHandler(){""===this.search&&(this.filtredGoods=this.goods);const e=new RegExp(this.search,"gi");this.filtredGoods=this.goods.filter((t=>e.test(t.title)))},fetch(e,t){let s;window.XMLHttpRequest?s=new XMLHttpRequest:window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLHTTP")),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?t(JSON.parse(s.responseText)):s.status>400&&e("все пропало"))},s.open("GET",API_URL,!0),s.send()},fetchPromise(){return new Promise(((e,t)=>{this.fetch(t,e)}))}},mounted(){this.fetchPromise().then((e=>{this.goods=e,this.filtredGoods=e})).catch((e=>{console.log(e)}))}});